{"ast":null,"code":"/*! @azure/msal-common v7.4.0 2022-09-06 */\n'use strict';\n\nimport { ClientAuthError } from '../error/ClientAuthError.js';\nimport { StringUtils } from '../utils/StringUtils.js';\nimport { Separators, Constants } from '../utils/Constants.js';\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n\n/**\r\n * Function to build a client info object from server clientInfo string\r\n * @param rawClientInfo\r\n * @param crypto\r\n */\n\nfunction buildClientInfo(rawClientInfo, crypto) {\n  if (StringUtils.isEmpty(rawClientInfo)) {\n    throw ClientAuthError.createClientInfoEmptyError();\n  }\n\n  try {\n    var decodedClientInfo = crypto.base64Decode(rawClientInfo);\n    return JSON.parse(decodedClientInfo);\n  } catch (e) {\n    throw ClientAuthError.createClientInfoDecodingError(e.message);\n  }\n}\n/**\r\n * Function to build a client info object from cached homeAccountId string\r\n * @param homeAccountId\r\n */\n\n\nfunction buildClientInfoFromHomeAccountId(homeAccountId) {\n  if (StringUtils.isEmpty(homeAccountId)) {\n    throw ClientAuthError.createClientInfoDecodingError(\"Home account ID was empty.\");\n  }\n\n  var clientInfoParts = homeAccountId.split(Separators.CLIENT_INFO_SEPARATOR, 2);\n  return {\n    uid: clientInfoParts[0],\n    utid: clientInfoParts.length < 2 ? Constants.EMPTY_STRING : clientInfoParts[1]\n  };\n}\n\nexport { buildClientInfo, buildClientInfoFromHomeAccountId };","map":{"version":3,"mappings":";;;;;;AAAA;;;AAGG;;AAeH;;;;AAIG;;AACa,yBAAgBA,aAAhB,EAAuCC,MAAvC,EAAsD;EAClE,IAAIC,WAAW,CAACC,OAAZ,CAAoBH,aAApB,CAAJ,EAAwC;IACpC,MAAMI,eAAe,CAACC,0BAAhB,EAAN;EACH;;EAED,IAAI;IACA,IAAMC,iBAAiB,GAAWL,MAAM,CAACM,YAAP,CAAoBP,aAApB,CAAlC;IACA,OAAOQ,IAAI,CAACC,KAAL,CAAWH,iBAAX,CAAP;EACH,CAHD,CAGE,OAAOI,CAAP,EAAU;IACR,MAAMN,eAAe,CAACO,6BAAhB,CAA+CD,CAAqB,CAACE,OAArE,CAAN;EACH;AACJ;AAED;;;AAGG;;;AACG,SAAUC,gCAAV,CAA2CC,aAA3C,EAAgE;EAClE,IAAIZ,WAAW,CAACC,OAAZ,CAAoBW,aAApB,CAAJ,EAAwC;IACpC,MAAMV,eAAe,CAACO,6BAAhB,CAA8C,4BAA9C,CAAN;EACH;;EACD,IAAMI,eAAe,GAAaD,aAAa,CAACE,KAAd,CAAoBC,UAAU,CAACC,qBAA/B,EAAsD,CAAtD,CAAlC;EACA,OAAO;IACHC,GAAG,EAAEJ,eAAe,CAAC,CAAD,CADjB;IAEHK,IAAI,EAAEL,eAAe,CAACM,MAAhB,GAAyB,CAAzB,GAA6BC,SAAS,CAACC,YAAvC,GAAsDR,eAAe,CAAC,CAAD;EAFxE,CAAP;AAIJ","names":["rawClientInfo","crypto","StringUtils","isEmpty","ClientAuthError","createClientInfoEmptyError","decodedClientInfo","base64Decode","JSON","parse","e","createClientInfoDecodingError","message","buildClientInfoFromHomeAccountId","homeAccountId","clientInfoParts","split","Separators","CLIENT_INFO_SEPARATOR","uid","utid","length","Constants","EMPTY_STRING"],"sources":["../../src/account/ClientInfo.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ClientAuthError } from \"../error/ClientAuthError\";\nimport { StringUtils } from \"../utils/StringUtils\";\nimport { ICrypto } from \"../crypto/ICrypto\";\nimport { Separators, Constants } from \"../utils/Constants\";\n\n/**\n * Client info object which consists of two IDs. Need to add more info here.\n */\nexport type ClientInfo = {\n    uid: string,\n    utid: string\n};\n\n/**\n * Function to build a client info object from server clientInfo string\n * @param rawClientInfo\n * @param crypto\n */\nexport function buildClientInfo(rawClientInfo: string, crypto: ICrypto): ClientInfo {\n    if (StringUtils.isEmpty(rawClientInfo)) {\n        throw ClientAuthError.createClientInfoEmptyError();\n    }\n\n    try {\n        const decodedClientInfo: string = crypto.base64Decode(rawClientInfo);\n        return JSON.parse(decodedClientInfo) as ClientInfo;\n    } catch (e) {\n        throw ClientAuthError.createClientInfoDecodingError((e as ClientAuthError).message);\n    }\n}\n\n/**\n * Function to build a client info object from cached homeAccountId string\n * @param homeAccountId \n */\nexport function buildClientInfoFromHomeAccountId(homeAccountId: string): ClientInfo {\n    if (StringUtils.isEmpty(homeAccountId)) {\n        throw ClientAuthError.createClientInfoDecodingError(\"Home account ID was empty.\");\n    }\n    const clientInfoParts: string[] = homeAccountId.split(Separators.CLIENT_INFO_SEPARATOR, 2);\n    return {\n        uid: clientInfoParts[0],\n        utid: clientInfoParts.length < 2 ? Constants.EMPTY_STRING : clientInfoParts[1]\n    };\n}\n"]},"metadata":{},"sourceType":"module"}